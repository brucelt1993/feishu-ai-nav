# Bot-Pilot é£ä¹¦æœºå™¨äººæœåŠ¡

é£ä¹¦ AI å¯¼èˆªå¹³å°çš„æ™ºèƒ½æœºå™¨äººåŠ©æ‰‹ï¼Œæ”¯æŒå·¥å…·å’¨è¯¢ã€æ•°æ®æŸ¥è¯¢å’Œæ™ºèƒ½é—®ç­”ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– **é£ä¹¦æœºå™¨äººå¯¹æ¥**ï¼šæ”¯æŒç§èŠå’Œç¾¤èŠ @æœºå™¨äºº è§¦å‘
- ğŸ§  **OpenAI é›†æˆ**ï¼šåŸºäº GPT-4o çš„æ™ºèƒ½å¯¹è¯
- ğŸ“Š **MCP å·¥å…·**ï¼š10 ä¸ªæ•°æ®æŸ¥è¯¢å·¥å…·ï¼ˆæ¦‚è§ˆã€æ’è¡Œã€è¶‹åŠ¿ã€ç•™å­˜ç­‰ï¼‰
- ğŸ¨ **å¡ç‰‡æ¶ˆæ¯**ï¼šæ•°æ®å±•ç¤ºä½¿ç”¨ç²¾ç¾é£ä¹¦å¡ç‰‡
- ğŸ”’ **è§’è‰²é™å®š**ï¼šåªå›ç­” AI å¯¼èˆªç›¸å…³é—®é¢˜

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd bot-pilot
uv sync
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env
# ç¼–è¾‘ .env å¡«å†™å®é™…é…ç½®
```

### 3. å¯åŠ¨æœåŠ¡

```bash
uv run uvicorn app.main:app --reload --port 8001
```

## é£ä¹¦æœºå™¨äººé…ç½®

### äº‹ä»¶è®¢é˜…

åœ¨é£ä¹¦å¼€æ”¾å¹³å°é…ç½®ä»¥ä¸‹äº‹ä»¶ï¼š

1. **è¯·æ±‚åœ°å€**ï¼š`https://your-domain.com/api/callback`
2. **è®¢é˜…äº‹ä»¶**ï¼š
   - `im.message.receive_v1` - æ¥æ”¶æ¶ˆæ¯

### æƒé™ç”³è¯·

- `im:message` - è·å–ä¸å‘é€å•èŠã€ç¾¤ç»„æ¶ˆæ¯
- `im:message:send_as_bot` - ä»¥åº”ç”¨èº«ä»½å‘é€æ¶ˆæ¯

## MCP å·¥å…·åˆ—è¡¨

| å·¥å…·å | åŠŸèƒ½ |
|--------|------|
| `get_overview` | ä»Šæ—¥æ•°æ®æ¦‚è§ˆ |
| `get_tool_ranking` | å·¥å…·æ’è¡Œæ¦œ |
| `get_user_ranking` | ç”¨æˆ·æ´»è·ƒæ¦œ |
| `get_trend` | è®¿é—®è¶‹åŠ¿ |
| `get_tool_detail` | å·¥å…·è¯¦æƒ… |
| `get_feedback_summary` | åé¦ˆæ±‡æ€» |
| `search_tools` | æœç´¢å·¥å…· |
| `get_category_stats` | åˆ†ç±»ç»Ÿè®¡ |
| `get_retention_stats` | ç”¨æˆ·ç•™å­˜ |
| `get_hourly_distribution` | æ—¶æ®µåˆ†å¸ƒ |

## å¿«æ·å‘½ä»¤

- `/help` - æ˜¾ç¤ºå¸®åŠ©
- `/ä»Šæ—¥æ•°æ®` - æŸ¥çœ‹ä»Šæ—¥æ¦‚è§ˆ
- `/å·¥å…·æ’è¡Œ` - çƒ­é—¨å·¥å…· TOP10
- `/ç”¨æˆ·æ’è¡Œ` - æ´»è·ƒç”¨æˆ· TOP10

## ç›®å½•ç»“æ„

```
bot-pilot/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py             # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config.py           # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ callback.py     # é£ä¹¦å›è°ƒ
â”‚   â”‚   â””â”€â”€ health.py       # å¥åº·æ£€æŸ¥
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ event_handler.py    # äº‹ä»¶å¤„ç†
â”‚   â”‚   â””â”€â”€ message_handler.py  # æ¶ˆæ¯å¤„ç†
â”‚   â”œâ”€â”€ llm/
â”‚   â”‚   â”œâ”€â”€ chat_service.py     # èŠå¤©æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ mcp_tools.py        # MCP å·¥å…·å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ prompt_manager.py   # Prompt ç®¡ç†
â”‚   â”‚   â””â”€â”€ tool_executor.py    # å·¥å…·æ‰§è¡Œå™¨
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ database.py         # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”œâ”€â”€ feishu_client.py    # é£ä¹¦å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ stats_bridge.py     # ç»Ÿè®¡æœåŠ¡
â”‚   â””â”€â”€ cards/
â”‚       â””â”€â”€ builder.py          # å¡ç‰‡æ„å»ºå™¨
â”œâ”€â”€ .env.example
â”œâ”€â”€ pyproject.toml
â””â”€â”€ README.md
```

## å¼€å‘è¯´æ˜

### æ·»åŠ æ–°çš„ MCP å·¥å…·

1. åœ¨ `llm/mcp_tools.py` ä¸­æ·»åŠ å·¥å…·å®šä¹‰
2. åœ¨ `llm/tool_executor.py` ä¸­æ·»åŠ æ‰§è¡Œæ–¹æ³•
3. åœ¨ `services/stats_bridge.py` ä¸­å®ç°æ•°æ®æŸ¥è¯¢

### è‡ªå®šä¹‰å¡ç‰‡æ ·å¼

åœ¨ `cards/builder.py` ä¸­æ·»åŠ æ–°çš„å¡ç‰‡æ„å»ºæ–¹æ³•ã€‚

## æŠ€æœ¯æ ˆ

- **Webæ¡†æ¶**ï¼šFastAPI
- **é£ä¹¦SDK**ï¼šlark-oapi
- **LLM**ï¼šOpenAI API
- **æ•°æ®åº“**ï¼šSQLAlchemy (å¼‚æ­¥)
- **æ—¥å¿—**ï¼šLoguru
